---
title: "Group Project"
author: "lahumada"
date: "2/5/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(warning = F, results = T, message = T)
loadPkg = function(x) { if (!require(x,character.only=T, quietly =T)) { install.packages(x,dep=T,repos="http://cran.us.r-project.org"); if(!require(x,character.only=T)) stop("Package not found") } }
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r Load 2015 data}
loadPkg('dplyr')
loadPkg('readxl')

#Read in general census data
census_2015 <- read.csv(file = 'acs2015updated.csv')

#Read in Specifically Education Data
edu_data_2015 <- read_csv("ACS_15_5YR_B15003_with_ann.csv", skip = 1) %>% mutate(Id2 = as.numeric(Id2))

#Read in Freedom Data
freedom <- read_excel("Freedom_In_The_50_States_2018.xlsx", sheet = "Overall")

#Combine
census_edu_2015 <- left_join(census_2015, edu_data_2015, by = c("CensusTract" = "Id2"))
full_2015 <- full_join(census_edu_2015, freedom %>% filter(Year == 2015), by = "State") 
```

```{r Load 2017 data}
#Read in general census data
census_2017 <- read.csv(file = 'acs2017_census_tract_data.csv') %>% mutate(CensusTract = TractId, TractId = NULL) %>% left_join(census_2015 %>% select(INTPTLAT, INTPTLONG, GEOID, CensusTract), by = 'CensusTract')

#Read in Specifically Education Data
edu_data_2017 <- read_csv("ACS_17_5YR_B15003_with_ann.csv", skip = 1) %>% mutate(Id2 = as.numeric(Id2))

#Read in Freedom Data
freedom <- read_excel("Freedom_In_The_50_States_2018.xlsx", sheet = "Overall")

#Combine
census_edu_2017 <- left_join(census, edu_data_2017, by = c("CensusTract" = "Id2"))
full_2017 <- full_join(census_edu_2017, freedom %>% filter(Year == 2015), by = "State") 
```

```{r geo scatter}
full_2015_2 <- subset(full_2015, INTPTLONG > -150 & INTPTLONG < -50 & INTPTLAT > 24 & INTPTLAT < 50) 
full_2017_2 <- subset(full_2017, INTPTLONG > -150 & INTPTLONG < -50 & INTPTLAT > 24 & INTPTLAT < 50) 


loadPkg("ggplot2")
ggplot(full_2015_2, aes( x= INTPTLONG, y = INTPTLAT, color = Hispanic)) + 
  geom_point(size=0.005) + scale_color_gradient(low="orange", high="red") +
  labs (title="Scatter Plot: Spanish Ethnicity in 2015",
        x=" Latitude",
        y = "Longitude")

ggplot(full_2017_2, aes( x= INTPTLONG, y = INTPTLAT, color = Hispanic)) + 
  geom_point(size=0.005) + scale_color_gradient(low="orange", high="red") +
  labs (title="Scatter Plot: Spanish Ethnicity in 2017",
        x=" Latitude",
        y = "Longitude")

```

```{r}


hist(census2$sodium, 
        col = "green",
        main = "Histogram: Sodium",
        xlab = "Amount of sodium per 100 grams in the sample")

ggplot(census2, aes( x= Professional, y = IncomePerCap, color = Asian)) + 
  geom_point(size=0.1) +
  labs (title="Scatter Plot",
        x="Construction",
        y = "IncomePerCap")

```

